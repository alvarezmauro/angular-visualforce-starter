Development
===========
All source code for the angular project is kept in the `src` directory.
You can start the local development server with the command `npm start`.
This will build the source code, start a local HTTP server in node and serve the contents of the `build` directory.
(In reality the contents are served from an in-memory cache provided by webpack, but it will look the same as the contents in the build directory.)

While running the local dev server, any changes made to the source code will trigger a rebuild.
This means you can update the source code, refresh the brower and see your changes.

### Web Service Mocks
Since the local dev server has no access to Salesforce, we must provide mocks for all calls to Visualforce remote actions.
These mocks are provided by [mockedVfrActions.js](src/js/mocks/mockedVfrActions.js).
Note that these mocks are used for local development only and will not be deployed to Salesforce.

Structure
=========
The `src` directory has the following base structure
+ [js](src/js) - Home for all javascript and unit test (.spec.js) files
+ [data](src/data) - Any data files you want to bundle with your application. Note: they still need to be `require`d
+ [styles](src/styles) - CSS stylesheets - loaded via [styles.js](src/styles.js)
+ [index.html](src/index.html) - app html page - used for local dev only. In Salesforce this will be replaced with a Visualforce page.
+ [vendor.js](src/vendor.js) - Third party libraries are imported here.
+ [templates.generated.js](src/templates.generated.js) - This is a generated file with the HTML templates used by angular.
  It generated by the build process with the help of [gulp-angular-templatecache](https://github.com/miickel/gulp-angular-templatecache)
+ [mocks.js](src/mocks.js) - Any mocks needed for local development are imported here.
+ [app.js](src/app.js) - This is the entry point for the angular application.
  It will import all child modules referenced by the application.
  Any modules not referenced here will not be loaded.
  Note that we expect the html page to load vendor.js before loading this file, so we have access to all 3rd party libraries.

#### [src/js/components](src/js/components)
Components used by angular. By convention we only use kebab case when naming the .comp.js files.
+ [app-root.comp.js](src/js/components/app-root.comp.js) - This is the root component for this application.
  It contains the navigation menu and ui-view component for displaying route components.

#### [src/js/config](src/js/config)
This directory contains all configurations used by angular at startup.
+ [index.js](src/js/config/index.js) - This is responsible for loading files in this directory.
+ [appSettings.constant.js](src/js/config/appSettings.constant.js) - Central location for all application settings.
+ [vfrActions.constant.js](src/js/config/vfrActions.constant.js) - Visualforce Remote Action configuration.
+ [log.config.js](src/js/config/log.config.js) - This enables debug logging in angular.
+ [routes.config.js](src/js/config/routes.config.js) - This configures the routes to use for this application.
+ [previousState.decorator.js](src/js/config/previousState.decorator.js) - This adds a previous state value to the angular ui router.
+ [toast.config.js](src/js/config/toast.config.js) - This provides default settings that apply to all user notifications.

#### [src/js/factories](src/js/factories)
  + [vfrAction.factory.js](src/js/factories/vfrAction.factory.js) - This factory will create VisualForce Remote Action callouts.

#### [src/js/services](src/js/services)
+ [navbar.service.js](src/js/services/navbar.service.js) - service class used by app-root to implement the navigation bar.
+ [userNotification.service.js](src/js/common/services/userNotification.service.js) - This service will display toast notifictions to the user.

#### [src/js/mocks](src/js/mocks)
This directory contains mock data and a mock service that allows angular to stub all calls to visualforce.
It is only used for local development when visualforce services are not available.
+ [vfrMock.js](src/js/mocks/vfrMock.js) - this class stubs out the javascript module for Visualforce.remoting.Manager.invokeAction so we can mock calls to Visualforce Remote Actions.
+ [mockedVfrActions.js](src/js/mocks/mockedVfrActions.js) - add methods here to mock out remote actions.
+ [data](src/js/mocks/data) - all mock data goes here. It's good practice to keep this separate from application data.

### Module Loading with CommonJS (i.e. `require`)
Javascript modules are imported using CommonJS.
This is done through a call to the `require` function.
Calling `require` will resolve another javascript class and execute it.
For example calling `require('./myScript');` will execute the file called myScript.js located in the same directory.
To require files in subdirectories call `require('./subdir/myScript');`
Note that when loading a javascript file the extension `.js` is omitted.

If the call to `require` expects an object to be returned then the imported file must define an object or function to export.
For example `var myObj = require('./myScript');` will expect myScript.js to export some object using the syntax `module.exports = myObject;`

Sometimes you will see a call that looks like `require('./subDir');`
CommonJS will treat this as an import of the `index.js` file located in the sub directory.

A call to load a module from the `node_modules` directory will look like this: `require('angular');`
This is because `node_modules` is setup as a resolve path in CommonJS and it knows to resolve for a subdirectory called 'angular' under node_modules.
In this particular case CommonJS will also use the `main` entry in package.json to identify which file to load.
If there is not main entry then you'll have to resolve the path in the require call: `require('angular/some/path/to/myScript');`

All calls to `require` that begin with `./` will resolve their imports from files local the the executing file.
CommonJS is configured with several root paths that it will use for module resolution.
These root paths include `node_modules`, but you can add additional entries if you like.
For example you can resolve a file under the src directory using `require('src/js/path/to/myScript');` but only if your module loader is configured to resolve this root.
CommonJS is configured to also import json files and css files.
You need to include the file extension when importing these file types.
For example `var severities = require('data/severities.json');` will load src/data/severities.json into an object and assign it to the variable `severities`;
Note that all calls to `require` are resolved during the build process by webpack and any file that is not imported will not be included in the build.

Unit Tests
==========
This application relies on unit tests to prove it is working according to specifications.
See [UNIT_TESTS.md](UNIT_TESTS.md) for more info on creating and running unit tests.

Angular v1.5
============
This application used Angular v1.5. See [ANGULAR.md](ANGULAR.md) for more info on angular.

Bootstrap CSS
=============
This application uses Twitter Bootstrap v3 for CSS and layout. See <http://bootstrapdocs.com/v3.3.6/docs/> for more info.

Build Tasks
===========
See [NODEJS.md](NODEJS.md) for more information
+ The build process and tasks
+ Unit test setup
+ Deployment
+ NodeJS in general

Miscellaneous
=============
+ [test](test) - This directory contains assets used to setup unit tests.
+ `build` - This directory contains the output from the build command.
+ `dist` - This directory contains the output used to deploy the application to Salesforce.
+ `coverage` - This directory contains results of code coverage.
+ [gulp](gulp) - This directory contains build tasks used by the gulp framework.
+ [.gitignore](.gitignore) - Used to ignore files and directories from source control.
+ [gulpfile.js](gulpfile.js) - Root file used by gulp framework.
+ [jsconfig.json](jsconfig.json) - VSCode project file.
+ [package.json](package.json) - NodeJS project file.
This file contains all references to 3rd party dependencies that will be installed with `npm install`.
It also contains some tasks that can be called with `npm run` commands.